<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Jinx</title>

  <!-- Model Viewer -->
  <script type="module" src="https://cdn.jsdelivr.net/npm/@google/model-viewer@2.0.0/dist/model-viewer.js"></script>

  <style>
    :root{
      --bg1:#0d0a12;
      --bg2:#1a1325;
      --accent1:#7c3cff;
      --accent2:#00d4ff;
    }

    *{box-sizing:border-box;font-family:"Vazirmatn",sans-serif;}

    body{
      margin:0;
      padding:0;
      background:linear-gradient(180deg,var(--bg1),var(--bg2));
      color:#eee;
      overflow-x:hidden;
    }

    /* ================== ุณุงุฎุชุงุฑ ุงุตู ================== */
    .wrapper{
      display:flex;
      flex-direction:column;
      gap:15px;
      padding:12px;
      max-width:900px;
      margin:auto;
    }

    /* ======= ูุฏู ุณูโุจุนุฏ ======= */
    .viewer-box{
      width:100%;
      height:60vh;
      background:rgba(255,255,255,0.05);
      border-radius:16px;
      padding:6px;
      display:flex;
      justify-content:center;
      align-items:center;
    }

    model-viewer{
      width:100%;
      height:100%;
      border-radius:14px;
      background:#00000042;
    }

    /* ======= ูพูู ฺุช ======= */
    .panel{
      background:rgba(255,255,255,0.06);
      border-radius:16px;
      padding:16px;
    }

    .title{
      font-size:22px;
      font-weight:700;
      color:var(--accent1);
      margin-bottom:10px;
    }

    .controls{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-bottom:10px;
    }

    .btn{
      padding:10px 14px;
      border:none;
      border-radius:10px;
      cursor:pointer;
      font-weight:700;
      background:linear-gradient(90deg,var(--accent1),var(--accent2));
      color:#111;
      flex:1;
      min-width:120px;
    }

    .btn.secondary{
      background:rgba(255,255,255,0.1);
      color:#ddd;
      border:1px solid rgba(255,255,255,0.2);
    }

    .label{font-size:13px;color:#bbb;margin-bottom:5px;}
    .transcript{
      background:rgba(255,255,255,0.08);
      padding:12px;border-radius:10px;
      min-height:45px;
      margin-bottom:15px;
      font-size:14px;
    }

    .messages{
      display:flex;
      flex-direction:column;
      gap:8px;
      max-height:250px;
      overflow-y:auto;
    }

    .message{
      padding:10px;
      border-radius:10px;
      max-width:90%;
      line-height:1.5;
      font-size:14px;
      word-wrap:break-word;
    }

    .message.user{
      background:rgba(0,0,0,0.5);
      align-self:flex-start;
    }

    .message.jinx{
      background:linear-gradient(90deg,var(--accent2),var(--accent1));
      color:#111;
      align-self:flex-end;
      font-weight:600;
    }

    /* ููุฒฺฉ */
    .audio-row{
      display:flex;
      align-items:center;
      gap:10px;
      margin-top:12px;
    }

    /* ููุจุงู */
    @media(max-width:600px){
      .viewer-box{height:50vh;}
      .btn{width:100%;}
      .messages{max-height:200px;}
    }
  </style>
</head>
<body>

  <div class="wrapper">

    <!-- ุจุฎุด ูุฏู -->
    <div class="viewer-box">
      <model-viewer src="arcane_-_jinx.glb" auto-rotate camera-controls shadow-intensity="0.8"
        interaction-prompt="none">
      </model-viewer>
    </div>

    <!-- ุจุฎุด ฺุช -->
    <div class="panel">

      <div class="title">Jinx</div>

      <div class="controls">
        <button id="recBtn" class="btn">๐ ุดุฑูุน ุถุจุท</button>
        <button id="stopBtn" class="btn secondary">โ ุชููู</button>
        <button id="clearBtn" class="btn secondary">๐งน ูพุงฺฉโฺฉุฑุฏู</button>
      </div>

      <div class="label">ูุชู ฺฏูุชูโุดุฏู:</div>
      <div id="transcript" class="transcript">...</div>

      <div class="label">ฺฏูุชฺฏู:</div>
      <div id="messages" class="messages"></div>


      <div class="label" style="margin-top:15px;">ููุณู:</div>
      <div class="audio-row">
        <audio id="bgAudio" loop preload="auto">
          <source src="imagine dragons - enemy (320).mp3" type="audio/mpeg">
        </audio>
        <button id="playBg" class="btn secondary" style="flex:0">โถ/โธ</button>
        <input id="bgVol" type="range" min="0" max="1" step="0.01" value="0.06">
      </div>

    </div>

  </div>

  <!-- ================= JS ================= -->
<script>
const recBtn = document.getElementById("recBtn");
const stopBtn = document.getElementById("stopBtn");
const clearBtn = document.getElementById("clearBtn");
const transcriptEl = document.getElementById("transcript");
const messagesEl = document.getElementById("messages");

/* ููุฒฺฉ */
const bgAudio = document.getElementById("bgAudio");
const playBg = document.getElementById("playBg");
const bgVol = document.getElementById("bgVol");
bgAudio.volume = bgVol.value;
playBg.onclick = () => bgAudio.paused ? bgAudio.play() : bgAudio.pause();
bgVol.oninput = () => bgAudio.volume = bgVol.value;

/* Speech Recognition */
let recognition = null;
if("webkitSpeechRecognition" in window){
  recognition = new webkitSpeechRecognition();
  recognition.lang = "fa-IR";

  recognition.onresult = e => {
    const text = e.results[0][0].transcript;
    transcriptEl.textContent = text;
    addMessage("user", text);
    replyToUser(text);
  };
}

recBtn.onclick = () => {
  if(recognition) recognition.start();
};
stopBtn.onclick = () => recognition && recognition.stop();
clearBtn.onclick = () => { transcriptEl.textContent=""; messagesEl.innerHTML=""; };

/* ุงุถุงูู ฺฉุฑุฏู ูพุงู ุจู ฺุช */
function addMessage(who, text){
  const div = document.createElement("div");
  div.className = "message " + (who === "user" ? "user" : "jinx");
  div.textContent = text;
  messagesEl.appendChild(div);
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

/* ====== TTS ุณุงุฏู ู ูุทูุฆู ====== */
function speak(text){
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "fa-IR";  // ุฒุจุงู ูุงุฑุณ
  u.pitch = 1;        // ุตุฏุง ุทุจุน
  u.rate = 1;         // ุณุฑุนุช ุทุจุน
  speechSynthesis.cancel(); // ูุทุน ูุฑ ุตุฏุง ูุจู
  speechSynthesis.speak(u); // ูพุฎุด ุตุฏุง
}

/* ูพุงุณุฎ ุณุงุฏู ุฏูู */
/* ====== ูพุงุณุฎโูุง ุฌูฺฉุณ (ณฐฐ+ ุฌูุงุจ) ====== */
const replies = {
  greeting: [
    "ุณูุงู... ุจุงุฒ ูู ุงููุฏุ",
    "ู... ฺู ุฎุจุฑุ",
    "ุณูุงู! ูุซู ุงูฺฉู ููุชุธุฑู ุจูุฏ.",
    "ุณูุงู... ุฌุฏุ ุฏูุจุงุฑู ุณูุงู ูโฺฏุ",
    "ุงููุ ุชู ูู ุงููุฏ... ุฎุจ!",
    "ุณูุงู... ูุซู ููุดู ุณุฑ ู ฺฉููโุช ูพุฏุง ุดุฏ.",
    "ู ู ู... ุฎูุด ุงููุฏุ ูฺฉุฑ ฺฉูู!",
    "ุจุงุฒู ุณูุงูุ ุชู ุนุงุฏุช ุฏุงุฑุ",
    "ุณูุงูุ ููโุฎูุง ู ฺุฒ ุฌุฏุฏ ุจฺฏุ",
    "ุงูููู... ุณูุงู! ูููุ",
    "ุณูุงู... ุง ููุท ูโุฎูุง ููุช ููู ุจฺฏุฑุ",
    "ุจุงุฒ ุณูุงู ฺฏูุชุ ููููููุ",
    "ุณูุงู! ุฌุฏ ุฌุฏุ",
    "ู... ุณูุงู!",
    "ุณูุงูุ ุจุงุฒ ูู ุชูุ",
    "ุณูุงู! ููโุฎูุง ู ฺุฒ ุชุงุฒู ุจฺฏุ",
    "ุณูุงู... ุจุงุฒู ุงููุฏุ",
    "ู... ูุซู ููุดู.",
    "ุณูุงู... ุฌุฏ ุญูุตููโู ุณุฑ ุฑูุชู",
    "ุณูุงู! ุฎุจุ ฺู ุฎุจุฑุ",
    "ุจุงุฒ ูู ุณูุงูุ ุชู ุฎู ูพุฑุญุงู.",
    "ุณูุงู... ููุดู ู ุณูุงู ุฏุงุฑ!",
    "ุณูุงู! ุงูุฏูุงุฑู ุขูุงุฏู ุจุงุด ุจุฑุง ุทุนููโูุงู.",
    "ุณูุงูุ ุจุง ู ฺฉู ุฌุฏ ุจุงุดู.",
    "ู... ุชู ู ุณูุงู ุฏูุจุงุฑูุ",
    "ุณูุงู! ุญุงูุง ุจุฑู ุณุฑ ุงุตู ูุทูุจุ",
    "ุณูุงู... ุฎุจุ ููุชุธุฑ ฺ ูุณุชุ",
    "ุณูุงู! ููโุฎูุง ู ฺฉุงุฑ ุณุฑฺฏุฑูโฺฉููุฏู ฺฉููุ",
    "ุจุงุฒ ุณูุงู ฺฏูุชุ ุขุฑูุ",
    "ุณูุงู! ูุงูุนุงู ููโุฎูุง ุญุฑู ุชุงุฒู ุจุฒูุ"
  ],
  mood: [
    "ุฎูุจู... ูู ุฎุจุ ูุซู ููุดู ฺฉู ูุงุฑุงุญุชู.",
    "ู ุญุณ ุนุฌุจ ุฏุงุฑูุ ูุซู ููุดู.",
    "ุฎุณุชูโู ูู ููฺูุงู ุขูุงุฏู ุทุนูู ุฒุฏู!",
    "ุงูุฑฺู ูพุงูุ ูู ุดูุฎู ูููุฒ ูุนุงู.",
    "ุญุณ ูฺฉูู ุฏูุง ฺฉู ุจโุฑุญู ุดุฏู.",
    "ููู ฺ ุจุฏูุ ูู ุญุฏุงูู ุชู ุงููุฏ.",
    "ูุซู ููุดูุ ู ฺฉู ุฌุฏ ู ู ฺฉู ุทุนููโุขูุฒ.",
    "ุฎุณุชูโูุ ูู ุฎุจุ ุชู ุงู ุดุฑุงุท ูู ูโุฎูุฏู.",
    "ุญุงูู ุนุฌุจุ ูุซู ููุดู.",
    "ูุงุฑุงุญุชูุ ูู ุฏูุณุช ุฏุงุฑู ุจุงูุงุช ุญุฑู ุจุฒูู.",
    "ุญุงูู ุฎูุจ ูุณุชุ ูู ููโุฐุงุฑู ุจููู.",
    "ู ุญุณ ุทุนููโุขูุฒ ุฏุงุฑู ุงูุฑูุฒ.",
    "ูุซู ููุดู ฺฉู ุฎุณุชูุ ฺฉู ุดูุฎ.",
    "ุญุงูู ุฎูุซ ูู ู ฺฉู ฺฉูุงู ุฏุงุฑู.",
    "ุงูุฑฺู ฺฉูุ ูู ุฌูฺฉ ูโุฒูู.",
    "ูุงุฑุงุญุชูุ ุงูุง ูููุฒ ุฑฺฉ ู ุตุฑุญู.",
    "ู ฺฉู ุฎุณุชูโูุ ุงูุง ุฎุจุ ุชู ุงููุฏ...",
    "ุญุงูู ุนุฌุจ ู ุบุฑุจุ ูู ุฌูุงุจ ูโุฏู.",
    "ูุซู ููุดูุ ูู ุฌุฏ ูู ุทุนููโุขูุฒ.",
    "ุญุงูู ุฎูุจ ูุณุชุ ูู ุณุน ูโฺฉูู ุณุฑฺฏุฑูโฺฉููุฏู ุจุงุดู.",
    "ู ุญุณ ุนุฌุจ ุฏุงุฑู... ูุซู ุฌูฺฉุณ.",
    "ูุงุฑุงุญุชูุ ูู ุฑฺฉ ุฌูุงุจ ูโุฏู.",
    "ุฎุณุชู ูู ูููุฒ ฺฉูุงูโุงู ูุนุงูู.",
    "ุญุงูู ู ุฌูุฑู ฺฉู ููุท ุจุง ุทุนูู ูโุชููู ุชูุถุญุด ุจุฏู.",
    "ูู ูุงุฑุงุญุชุ ูู ู ฺฉู ุดูุฎ...",
    "ุญุณ ูโฺฉูู ุจุงุฏ ู ุทุนูู ุจุฒูู ุงูุงู.",
    "ูุซู ููุดูุ ฺฉู ุฌุฏุ ฺฉู ุทุนููโุขูุฒ.",
    "ุญุงูู ูุชูุณุทู ูู ุขูุงุฏู ุฌูุงุจ ุฏุงุฏู.",
    "ุฎุณุชูโู... ูู ุฌูุงุจ ูโุฏู.",
    "ู ุญุณ ุนุฌุจ ูู ุฑฺฉ ู ุฌุฏ..."
  ],
  joke: [
    "ูุฎูุง ู ุฌูฺฉ ูุงุฑุงุญุชโฺฉููุฏู ุจุดููุ ููุ ููุท ฺฉูุงู ูโุฒูู.",
    "ู ุฌูฺฉ ุฏุงุฑู: ฺุฑุง ุฏูุง ุจุฏูุ ฺูู ูุซู ูู ุฌุฏู!",
    "ุฌูฺฉุ ุฎุจ... ุดุงุฏ ุชู ุจุฎูุฏุ ูู ุทุนูู ูโฺฉูู.",
    "ู ุฌูฺฉ ุฑฺฉ: ฺุฑุง ุขุฏูโูุง ููุดู ุงุญูููุ ุฌูุงุจ: ฺูู ุฏูุง ุทุนููโุขูุฒู.",
    "ุฌูฺฉ ุฎุณุชูโฺฉููุฏู ูุฎูุงุ ุฎุจุ ุงูู!",
    "ู ุดูุฎ ฺฉูฺฺฉ: ุชู ุฏูุจุงุฑู ุงููุฏ!",
    "ู ุทุนูู ุฏุงุฑู: ฺุฑุง ุชู ููุดู ุณูุงู ูโฺฏุ",
    "ู ุดูุฎู ูุงุฑุงุญุชโฺฉููุฏู: ุฏูุง ุจุฏูุ ูู ูู ุฑฺฉ.",
    "ู ุฌูฺฉ ุชูุฎ: ฺุฑุง ูฺโฺฉุณ ุฏุฑุณุช ููโฺฏูุ ฺูู ูุซู ูู ุทุนููโุฒูู.",
    "ุดูุฎู ุงูุฑูุฒ: ุฎูุฏูโุช ุฎุดฺฉ ูุดูุ ูู ูู ุฎูุดู ูุงุฏ.",
    "ู ฺฉูุงู: ุชู ูฺฉุฑ ฺฉุฑุฏ ูู ููุท ุฌุฏูุ ููุ ุดูุฎ ููู.",
    "ู ุฌูฺฉ ฺฉูฺฺฉ: ฺุฑุง ุฌูฺฉุณ ููุดู ูุงุฑุงุญุชูุ ฺูู ุฑฺฉ ู ุทุนููโุขูุฒู.",
    "ู ฺฉูุงู ฺฉูุชุงู: ุชู ุจุงุฒ ุณูุงู ูโูพุฑุณุ ุนุงูู.",
    "ุดูุฎ ุชูุฎ: ุฏูุง ุจุฏูุ ูู ูู ูโุฎูุฏู.",
    "ู ุฌูฺฉ ุนุฌุจ: ูู ุฌูฺฉุณ ูุณุชูุ ูุงุฑุงุญุช ู ุดูุฎ.",
    "ุดูุฎู ุฑฺฉ: ุชู ูฺฉุฑ ฺฉุฑุฏ ูู ููุดู ุฌุฏูุ ูู.",
    "ู ุทุนูู: ุฏูุจุงุฑู ุณูุงูุ ุงูู...",
    "ู ุดูุฎู ฺฉูุชุงู: ุฎูุฏูโู ุฎุดฺฉุ ูู ุญุฑู ูโุฒูู.",
    "ฺฉูุงู: ุญูุตููโู ุณุฑ ุฑูุชู ูู ุฌูุงุจ ูุฏู.",
    "ุดูุฎู ุทุนููโุขูุฒ: ุชู ููุดู ูุฎูุง ุญุฑู ุจุฒูุ",
    "ู ุฌูฺฉ ฺฉูุชุงู: ุฏูุง ุจุฏูุ ุชู ูู ูโุฏูู.",
    "ฺฉูุงู: ูฺฉุฑ ฺฉุฑุฏ ูู ุจโุญุณโูุ ูู...",
    "ุดูุฎ: ุชู ู ุณูุงูโูุงุชุ ุนุงูู.",
    "ุทุนูู: ุจุงุฒ ูู ุงููุฏุ ุฎูุด ุงููุฏ!",
    "ุดูุฎ ฺฉูุชุงู: ุฏูุง ุจุฏูุ ูู ูู ุฑฺฉู.",
    "ุฌูฺฉ ุนุฌุจ: ฺุฑุง ุชู ููุดู ูโุฎูุง ุฌูุงุจ ุจฺฏุฑุ",
    "ุดูุฎู ฺฉูุชุงู: ุจุงุฒ ูู ุณูุงูุ ูููููู.",
    "ฺฉูุงู: ุชู ููุดู ููุช ููู ูโฺฏุฑ.",
    "ุดูุฎ ุฑฺฉ: ุฏูุง ุจุฏูุ ูู ุญุฏุงูู ุชู ุงููุฏ.",
    "ุฌูฺฉ ฺฉูฺฺฉ: ูู ูุงุฑุงุญุชู ูู ุดูุฎู..."
  ],
  // ... ูโุชูุงู ุจูู ุฏุณุชูโุจูุฏโูุง ูุซู music, project, goodbye, encourage ู ุบุฑู ุงุถุงูู ฺฉุฑุฏ
};

/* ุชุงุจุน ุงูุชุฎุงุจ ุฌูุงุจ ุชุตุงุฏู ุงุฒ ุฏุณุชู */
function randomReply(category){
  const arr = replies[category];
  return arr[Math.floor(Math.random()*arr.length)];
}

/* ====== ุชุงุจุน replyToUser ====== */
function replyToUser(t){
  const s = t.toLowerCase();
  let r = "ูุนูุง ุญุณุด ูุณุช ุจุนุฏู ุจุง"; // ุฌูุงุจ ูพุดูุฑุถ

  // ุฏุณุชูโุจูุฏโูุง ุณุงุฏู ุจุง ุชุดุฎุต ฺฉููู ฺฉูุฏ
  if(s.includes("ุณูุงู")) r = randomReply("greeting");
  else if(s.includes("ฺุทูุฑ") || s.includes("ุญุงูุช")) r = randomReply("mood");
  else if(s.includes("ุฌูฺฉ") || s.includes("ุดูุฎ")) r = randomReply("joke");
  // ... ูโุชูุงู ุฏุณุชูโุจูุฏโูุง ุจุดุชุฑ ุงุถุงูู ฺฉุฑุฏ

  addMessage("jinx", r); // ุงุถุงูู ฺฉุฑุฏู ูุชู ุฌูุงุจ
  speak(r);               // ูพุฎุด ุตุฏุง
}

</script>

</script>

 

</body>
</html>
